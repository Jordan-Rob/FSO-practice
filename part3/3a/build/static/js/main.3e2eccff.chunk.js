(this.webpackJsonptestapp=this.webpackJsonptestapp||[]).push([[0],{17:function(e,t,n){e.exports=n(41)},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var a=n(2),r=n.n(a),o=n(5),c=n(6),u=n(4),l=n(0),i=n.n(l),s=n(16),m=n.n(s),f=n(3),p=n.n(f),d=function(e){var t=e.note,n=e.toggleImportance,a=t.important?"make not important":"make important";return i.a.createElement("li",{className:"note"},t.content," ",i.a.createElement("button",{onClick:n},a))},v=null,g={getAll:function(){return p.a.get("/api/notes")},create:function(){var e=Object(o.a)(r.a.mark((function e(t){var n,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:v}},e.next=3,p.a.post("/api/notes",t,n);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return p.a.put("".concat("/api/notes","/").concat(e),t)},setToken:function(e){v="bearer ".concat(e)}},b={login:function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=function(e){var t=e.message;return null===t?null:i.a.createElement("div",{className:"error"},t)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(40);p.a.get("http://localhost:3001/notes").then((function(e){return console.log(e.data)}));var E=p.a.get("http://localhost:3001/foobar");console.log(E);var w=function(){var e=Object(l.useState)([]),t=Object(u.a)(e,2),n=t[0],a=t[1],s=Object(l.useState)(""),m=Object(u.a)(s,2),f=m[0],p=m[1],v=Object(l.useState)(!0),E=Object(u.a)(v,2),w=E[0],O=E[1],j=Object(l.useState)("some error happened..."),k=Object(u.a)(j,2),S=k[0],y=k[1],x=Object(l.useState)(""),I=Object(u.a)(x,2),C=I[0],N=I[1],T=Object(l.useState)(""),J=Object(u.a)(T,2),A=J[0],D=J[1],U=Object(l.useState)(null),W=Object(u.a)(U,2),B=W[0],M=W[1];Object(l.useEffect)((function(){console.log("Effect"),g.getAll().then((function(e){console.log("promise fulfilled"),a(e.data)}))}),[]),Object(l.useEffect)((function(){var e=window.localStorage.getItem("loggedInUser");if(e){var t=JSON.parse(e);M(t),g.setToken(t.token)}}),[]);var z=w?n:n.filter((function(e){return!0===e.important})),P=function(e){e.preventDefault();var t={content:f,date:new Date,important:Math.random()<.5};g.create(t).then((function(e){a(n.concat(e.data)),p("")}))},$=function(e){console.log(e.target.value),p(e.target.value)},q=function(){var e=Object(o.a)(r.a.mark((function e(t){var n;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,b.login({username:C,password:A});case 4:n=e.sent,window.localStorage.setItem("loggedInUser",JSON.stringify(n)),g.setToken(n.token),M(n),N(""),D(""),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),y("Wrong Credentials"),setTimeout((function(){y(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(t){return e.apply(this,arguments)}}();return i.a.createElement("div",null,i.a.createElement("h1",null,"Notes"),i.a.createElement(h,{message:S}),null===B?i.a.createElement("form",{onSubmit:q},i.a.createElement("div",null,"username",i.a.createElement("input",{type:"text",value:C,name:"Username",onChange:function(e){var t=e.target;return N(t.value)}})),i.a.createElement("div",null,"password",i.a.createElement("input",{type:"password",value:A,name:"Password",onChange:function(e){var t=e.target;return D(t.value)}})),i.a.createElement("button",{type:"submit"},"login")):i.a.createElement("div",null,i.a.createElement("p",null,B.name," is logged in"),i.a.createElement("form",{onSubmit:P},i.a.createElement("input",{value:f,onChange:$}),i.a.createElement("button",{type:"submit"},"save"))),i.a.createElement("div",null,i.a.createElement("button",{onClick:function(){return O(!w)}},"show ",w?"important":"all")),i.a.createElement("ul",null,z.map((function(e,t){return i.a.createElement(d,{key:t,note:e,toggleImportance:function(){return function(e){var t=n.find((function(t){return t.id===e})),r=Object(c.a)(Object(c.a)({},t),{},{important:!t.important});g.update(e,r).then((function(t){a(n.map((function(n){return n.id!==e?n:t.data})))})).catch((function(r){y("Note '".concat(t.content,"' was already removed from server ")),setTimeout((function(){y(null)}),5e3),a(n.filter((function(t){return t.id!==e})))}))}(e.id)}})}))))};m.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(w,{notes:[{id:0,val:"foo"},{id:1,val:"foobar"},{id:2,val:"barfoo"}]})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[17,1,2]]]);
//# sourceMappingURL=main.3e2eccff.chunk.js.map